<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>自定义滚动条</title>
    <style media="screen">
      *{margin: 0; padding: 0}
      .box{width: 400px; height: 300px; border: 1px solid #000; margin: 100px auto; overflow: hidden;}
      .con_box{float: left; width: 380px; height: 100%; position: relative; top: 0; left: 0;}
      .con{position: absolute; top: 0; left: 0;}
      .bar_box{float: left; width: 20px; height: 100%; position: relative; top: 0; left: 0; background: #ccc;}
      .bar{width: 20px; height: 50px; background: #666; position: absolute;top: 0; left: 0; border-radius: 10px; }
    </style>
    <script type="text/javascript">
        function addEvent(obj,sEv,fn){
            if(obj.addEventListener){
                obj.addEventListener(sEv,fn,false);
            }else{
                obj.attachEvent('on'+sEv,fn);
            }
        }
        function addWheel(obj,fn){
            function fnDir(ev){
                var oEvent = ev||event;
                var bDir = true;
                if(oEvent.wheelDelta){
                    oEvent.wheelDelta<0?bDir = true:bDir = false;
                }else{
                    oEvent.wheelDelta>0?bDir = true:bDir = false;
                }
                fn&&fn(bDir);
                oEvent.preventDefault&&oEvent.preventDefault();
                return false;
            }
            if(window.navigator.userAgent.indexOf('Firefox')!=-1){
                addEvent(obj,'DOMMouseScroll',fnDir);
            }else{
                addEvent(obj,'mousewheel',fnDir);
            }
        }
        window.onload = function(){
            var oBox = document.getElementById('box');
            var oConBox = document.getElementById('con_box');
            var oCon = document.getElementById('con');
            var oBarBox = document.getElementById('bar_box');
            var oBar = document.getElementById('bar');
            oBar.onmousedown = function(ev){
                var oEvent = ev||event;
                var disY = oEvent.clientY - oBar.offsetTop;
                document.onmousemove = function(ev){
                    var oEvent = ev||event;
                    var t = oEvent.clientY - disY;
 
                    changeTop(t);
                };
                document.onmouseup = function(){
                    document.onmousemove = null;
                    document.onmouseup = null;
                    oBar.releaseCapture&&oBar.releaseCapture();
                };
                oBar.setCapture&&oBar.setCapture();
                return false;
            };
            function changeTop(t){
               if(t<0){
                        t = 0;
                    }else if(t>oBarBox.offsetHeight - oBar.offsetHeight){
                        t = oBarBox.offsetHeight - oBar.offsetHeight;
                    }
                oBar.style.top = t +'px';
                var scale = t/(oBarBox.offsetHeight - oBar.offsetHeight);
                oCon.style.top = (oConBox.offsetHeight - oCon.scrollHeight)*scale +'px';
            }
            addWheel(oBox,function(bDir){
                var t = oBar.offsetTop;
                bDir?t+=10:t-=10;
                changeTop(t);
            });       
        };
    </script>
  </head>
  <body>
    <div class="box" id="box">
      <div class="con_box" id="con_box">
        <div class="con" id="con">
          哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵哈哈哈呵呵
        </div>
      </div>
      <div class="bar_box" id="bar_box">
        <div class="bar" id="bar">
        </div>
      </div>
    </div>
  </body>
</html>
